import { T } from "../src/owen-s-t-function";
import { ok } from "assert";

const { abs, max } = Math;

const cases = [
	[0.0625, 0.25, 0.03891193023470137],
	[6.5, 0.4375, 2.000577304850831e-11],
	[7, 0.9688, 6.399062719389869e-13],
	[4.78125, 0.0625, 1.0632974804687463e-7],
	[2, 0.5, 0.008625077985521507],
	[1, 1, 0.0667418089782286],
	[1, 0.5, 0.04306469112078537],
	[1, 0.999999, 0.06674188216570097],
	[1, 2, 0.0784681869930841],
	[1, 3, 0.0792995047488726],
	[0.5, 0.5, 0.06448860284750375],
	[0.5, 1, 0.1066710629614485],
	[0.5, 2, 0.1415806036539784],
	[0.5, 3, 0.1510840430760184],
	[0.25, 0.5, 0.07134663382271778],
	[0.25, 1, 0.1201285306350883],
	[0.25, 2, 0.1666128410939293],
	[0.25, 3, 0.1847501847929859],
	[0.125, 0.5, 0.07317273327500386],
	[0.125, 1, 0.1237630544953746],
	[0.125, 2, 0.1737438887583106],
	[0.125, 3, 0.1951190307092811],
	[0.007812, 0.5, 0.07378938035365545],
	[0.007812, 1, 0.1249951430754052],
	[0.007812, 2, 0.1761984774738108],
	[0.007812, 3, 0.1987772386442824],
	[0.007812, 10, 0.2340886964802671],
	[0.007812, 100, 0.2479460829231492],
	[0.007812, -100, -0.2479460829231492],
];

function closeTo(a: number, b: number): boolean {
	return abs(a - b) / max(a, b) < 1e-5;
}

describe("T(h, a)", () => {
	cases.forEach(test => {
		const [h, a, ret] = test;

		it(`T(${h}, ${a}) = ${ret}`, () => ok(closeTo(T(h, a), ret)));
	});
});
